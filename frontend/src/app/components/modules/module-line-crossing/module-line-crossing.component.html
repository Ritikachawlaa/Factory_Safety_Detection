<div class="module-container">
  <div class="module-header">
    <div class="header-left">
      <span class="module-icon">ğŸš§</span>
      <div>
        <h1 class="module-title">Line Crossing Detection</h1>
        <p class="module-subtitle">Boundary violation monitoring</p>
      </div>
    </div>
    <div class="status-badge" [class.active]="isDetecting">
      <span class="badge-dot"></span>{{ isDetecting ? 'Detecting' : 'Standby' }}
    </div>
  </div>

  <!-- Control Buttons -->
  <div class="control-section">
    <button 
      class="control-btn primary" 
      (click)="startCamera()"
      [disabled]="cameraActive"
    >
      <span>ğŸ“¹</span> Start Camera
    </button>
    <button 
      class="control-btn danger" 
      (click)="stopCamera()"
      [disabled]="!cameraActive"
    >
      <span>â¹ï¸</span> Stop Camera
    </button>
    <button 
      class="control-btn success" 
      (click)="startDetection()"
      [disabled]="isDetecting || !cameraActive"
    >
      <span>ğŸ¯</span> Start Detecting
    </button>
    <button 
      class="control-btn warning" 
      (click)="stopDetection()"
      [disabled]="!isDetecting"
    >
      <span>â¸ï¸</span> Stop Detecting
    </button>
  </div>

  <div class="content-grid">
    <div class="video-section">
      <div class="video-container" style="position: relative;">
        <video #videoElement autoplay playsinline class="video-feed"></video>
        <canvas #canvasElement style="position: absolute; top: 0; left: 0; pointer-events: none;"></canvas>
        <div class="live-indicator" *ngIf="cameraActive"><span class="live-dot"></span>LIVE</div>
      </div>
    </div>
    <div class="stats-panel">
      <div class="stat-card primary">
        <div class="stat-icon">ğŸš¶</div>
        <div class="stat-content">
          <p class="stat-label">Line Cross Count</p>
          <p class="stat-value">{{ detectionResult?.total_crossings || 0 }}</p>
        </div>
      </div>
      <div class="stat-card secondary">
        <div class="stat-icon">ğŸ¯</div>
        <div class="stat-content">
          <p class="stat-label">Tracked Objects</p>
          <p class="stat-value">{{ detectionResult?.tracked_objects || 0 }}</p>
        </div>
      </div>
      <div class="stat-card tertiary">
        <div class="stat-icon">âš ï¸</div>
        <div class="stat-content">
          <p class="stat-label">Status</p>
          <p class="stat-value">{{ detectionResult?.line_crossed ? 'Crossed' : 'Clear' }}</p>
        </div>
      </div>
    </div>
  </div>
  <div class="history-section">
    <h2 class="history-title">Recent Activity</h2>
    <div class="history-list">
      <div *ngFor="let entry of recentHistory" class="history-item">
        <div class="history-time">{{ formatTime(entry.timestamp) }}</div>
        <div class="history-label">{{ entry.label }}</div>
        <div class="history-value">{{ entry.value ? 'âš ï¸ Crossed' : 'Clear' }}</div>
      </div>
      <div *ngIf="recentHistory.length === 0" class="history-empty"><p>No activity recorded yet</p></div>
    </div>
  </div>
</div>
