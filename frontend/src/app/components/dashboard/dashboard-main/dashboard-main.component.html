<div class="dashboard-container">
  <!-- Header -->
  <div class="dashboard-header">
    <div>
      <h1 class="dashboard-title">AI Video Analytics Dashboard</h1>
      <p class="dashboard-subtitle">Real-time monitoring across 12 AI detection modules</p>
    </div>
    <div class="header-actions">
      <span class="status-badge" [class.active]="isDetecting">
        <span class="badge-dot"></span>
        {{ isDetecting ? 'Live Detection' : 'Standby' }}
      </span>
    </div>
  </div>

  <!-- Webcam Section -->
  <div class="webcam-section">
    <div class="video-container">
      <video 
        #videoElement 
        autoplay 
        playsinline
        class="video-feed"
        [class.active]="webcamInitialized"
      ></video>
      
      <!-- Webcam Overlay -->
      <div class="video-overlay" *ngIf="!webcamInitialized">
        <div class="overlay-content">
          <div class="spinner"></div>
          <p>{{ webcamError || 'Initializing webcam...' }}</p>
        </div>
      </div>

      <!-- Live Indicator -->
      <div class="live-indicator" *ngIf="webcamInitialized">
        <span class="live-dot"></span>
        LIVE
      </div>
    </div>
  </div>

  <!-- Quick Stats -->
  <div class="stats-grid">
    <div class="stat-card blue">
      <div class="stat-icon">ğŸ‘¤</div>
      <div class="stat-content">
        <p class="stat-label">People Detected</p>
        <p class="stat-value">{{ quickStats.people }}</p>
      </div>
    </div>

    <div class="stat-card green">
      <div class="stat-icon">ğŸš—</div>
      <div class="stat-content">
        <p class="stat-label">Vehicles</p>
        <p class="stat-value">{{ quickStats.vehicles }}</p>
      </div>
    </div>

    <div class="stat-card red">
      <div class="stat-icon">âš ï¸</div>
      <div class="stat-content">
        <p class="stat-label">Active Alerts</p>
        <p class="stat-value">{{ quickStats.alerts }}</p>
      </div>
    </div>

    <div class="stat-card purple">
      <div class="stat-icon">ğŸ“¦</div>
      <div class="stat-content">
        <p class="stat-label">Production Count</p>
        <p class="stat-value">{{ quickStats.production }}</p>
      </div>
    </div>
  </div>

  <!-- Module Overview -->
  <div class="modules-section">
    <h2 class="section-title">Detection Modules</h2>
    <p class="section-subtitle">Click any module to view detailed analytics</p>

    <div class="modules-grid">
      <!-- Human Detection -->
      <div class="module-card" (click)="navigateToModule('human')">
        <div class="module-icon">ğŸ‘¤</div>
        <h3 class="module-name">Human Detection</h3>
        <p class="module-value">{{ detectionResult?.people_count || 0 }} detected</p>
        <div class="module-status active">Active</div>
      </div>

      <!-- Vehicle Detection -->
      <div class="module-card" (click)="navigateToModule('vehicle')">
        <div class="module-icon">ğŸš—</div>
        <h3 class="module-name">Vehicle Detection</h3>
        <p class="module-value">{{ detectionResult?.vehicle_count || 0 }} vehicles</p>
        <div class="module-status active">Active</div>
      </div>

      <!-- Helmet/PPE -->
      <div class="module-card" (click)="navigateToModule('helmet')">
        <div class="module-icon">â›‘ï¸</div>
        <h3 class="module-name">Helmet / PPE</h3>
        <p class="module-value">{{ detectionResult?.ppe_compliance_rate || 0 }}% compliant</p>
        <div class="module-status" [class.active]="detectionResult?.helmet_violations === 0">
          {{ detectionResult?.helmet_violations === 0 ? 'Safe' : 'Alert' }}
        </div>
      </div>

      <!-- Loitering -->
      <div class="module-card" (click)="navigateToModule('loitering')">
        <div class="module-icon">â±ï¸</div>
        <h3 class="module-name">Loitering</h3>
        <p class="module-value">{{ detectionResult?.loitering_count || 0 }} detected</p>
        <div class="module-status" [class.active]="!detectionResult?.loitering_detected">
          {{ detectionResult?.loitering_detected ? 'Alert' : 'Clear' }}
        </div>
      </div>

      <!-- Labour Count -->
      <div class="module-card" (click)="navigateToModule('labour-count')">
        <div class="module-icon">ğŸ‘¥</div>
        <h3 class="module-name">Labour Count</h3>
        <p class="module-value">{{ detectionResult?.labour_count || 0 }} workers</p>
        <div class="module-status active">Active</div>
      </div>

      <!-- Crowd Density -->
      <div class="module-card" (click)="navigateToModule('crowd')">
        <div class="module-icon">ğŸ¢</div>
        <h3 class="module-name">Crowd Density</h3>
        <p class="module-value">{{ detectionResult?.crowd_density || 'Normal' }}</p>
        <div class="module-status" [class.active]="!detectionResult?.crowd_detected">
          {{ detectionResult?.crowd_detected ? 'Crowded' : 'Normal' }}
        </div>
      </div>

      <!-- Box Counting -->
      <div class="module-card" (click)="navigateToModule('box-count')">
        <div class="module-icon">ğŸ“¦</div>
        <h3 class="module-name">Box Production</h3>
        <p class="module-value">{{ detectionResult?.box_count || 0 }} boxes</p>
        <div class="module-status active">Active</div>
      </div>

      <!-- Line Crossing -->
      <div class="module-card" (click)="navigateToModule('line-crossing')">
        <div class="module-icon">â¡ï¸</div>
        <h3 class="module-name">Line Crossing</h3>
        <p class="module-value">{{ detectionResult?.total_crossings || 0 }} crossings</p>
        <div class="module-status active">Active</div>
      </div>

      <!-- Tracking -->
      <div class="module-card" (click)="navigateToModule('tracking')">
        <div class="module-icon">ğŸ¯</div>
        <h3 class="module-name">Auto Tracking</h3>
        <p class="module-value">{{ detectionResult?.tracked_objects || 0 }} tracked</p>
        <div class="module-status active">Active</div>
      </div>

      <!-- Motion -->
      <div class="module-card" (click)="navigateToModule('motion')">
        <div class="module-icon">ğŸ’¨</div>
        <h3 class="module-name">Smart Motion</h3>
        <p class="module-value">{{ detectionResult?.motion_intensity || 0 }}% intensity</p>
        <div class="module-status" [class.active]="detectionResult?.motion_detected">
          {{ detectionResult?.motion_detected ? 'Motion' : 'Still' }}
        </div>
      </div>

      <!-- Face Detection -->
      <div class="module-card" (click)="navigateToModule('face-detection')">
        <div class="module-icon">ğŸ˜Š</div>
        <h3 class="module-name">Face Detection</h3>
        <p class="module-value">{{ detectionResult?.faces_detected || 0 }} faces</p>
        <div class="module-status active">Active</div>
      </div>

      <!-- Face Recognition -->
      <div class="module-card" (click)="navigateToModule('face-recognition')">
        <div class="module-icon">ğŸ”</div>
        <h3 class="module-name">Face Recognition</h3>
        <p class="module-value">{{ detectionResult?.faces_recognized?.length || 0 }} identified</p>
        <div class="module-status active">Active</div>
      </div>
    </div>
  </div>
</div>
